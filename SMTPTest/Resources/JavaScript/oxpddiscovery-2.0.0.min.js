!function(a,b){"use strict";function c(b,c){return 0===b.status?new a.Error(a.ErrorName.AjaxError,"Connection failed"):404===b.status?new a.Error(a.ErrorName.NotFound,"404 Requested resource not found"):500===b.status?new a.Error(a.ErrorName.ServerError,"500 Internal server error"):"parsererror"===c?new a.Error(a.ErrorName.AjaxError,"Parse failed"):"timeout"===c?new a.Error(a.ErrorName.AjaxError,"Timeout"):"abort"===c?new a.Error(a.ErrorName.AjaxError,"Aborted"):new a.Error(a.ErrorName.Unknown,"Unknown Error: "+b.responseText)}var d="https://localhost/DevMgmt/DiscoveryTree.xml";a.ErrorName={AjaxError:"AjaxError",NotFound:"NotFound",ServerError:"ServerError",Unknown:"Unknown"},a.Setup=function(a){void 0!==a&&null!==a&&a.length>0&&(d="https://"+a+"/DevMgmt/DiscoveryTree.xml")},a.Error=function(a,b){this.name=a,this.message=b},a.Error.prototype=new Error,a.Error.prototype.constructor=a.Error,a.DiscoveredFeature=function(a,b,c,d){this.resourceURI=a,this.resourceType=b,this.revision=c,this.minorRevision=d},a.DiscoveredInterface=function(a,b,c,d){this.manifestUri=a,this.resourceType=b,this.revision=c,this.minorRevision=d},a.DiscoveredTree=function(a,b,c,d){this.resourceURI=a,this.resourceType=b,this.revision=c,this.minorRevision=d},a.DiscoveryTree=function(c){var d=b(c);this.discoveredFeatures=null,this.discoveredInterfaces=null,this.discoveredTrees=null;var e=this;d.find("SupportedFeature").each(function(){null===e.discoveredFeatures&&(e.discoveredFeatures=[]);var c=b(this).find("ResourceURI").text(),d=b(this).find("ResourceType").text(),f=b(this).find("Revision").text(),g=b(this).find("MinorRevision").text();g&&0!==g.length||(g="1.0");var h=new a.DiscoveredFeature(c,d,f,g);e.discoveredFeatures.push(h)}),d.find("SupportedIfc").each(function(){null===e.discoveredInterfaces&&(e.discoveredInterfaces=[]);var c=b(this).find("ManifestURI").text(),d=b(this).find("ResourceType").text(),f=b(this).find("Revision").text(),g=b(this).find("MinorRevision").text();g&&0!==g.length||(g="1.0");var h=new a.DiscoveredInterface(c,d,f,g);e.discoveredInterfaces.push(h)}),d.find("SupportedTree").each(function(){null===e.discoveredTrees&&(e.discoveredTrees=[]);var c=b(this).find("ResourceURI").text(),d=b(this).find("ResourceType").text(),f=b(this).find("Revision").text(),g=b(this).find("MinorRevision").text();g&&0!==g.length||(g="1.0");var h=new a.DiscoveredTree(c,d,f,g);e.discoveredTrees.push(h)})},a.DiscoveryTree.prototype.GetDiscoveredFeatureByResourceTypeAndRevision=function(a,b){var c;if(this.discoveredFeatures)for(c=0;c<this.discoveredFeatures.length;c+=1)if(this.discoveredFeatures[c].resourceType===a&&this.discoveredFeatures[c].revision===b)return this.discoveredFeatures[c];return null},a.DiscoveryTree.prototype.GetDiscoveredInterfaceByResourceTypeAndRevision=function(a,b){var c;if(this.discoveredInterfaces)for(c=0;c<this.discoveredInterfaces.length;c+=1)if(this.discoveredInterfaces[c].resourceType===a&&this.discoveredInterfaces[c].revision===b)return this.discoveredInterfaces[c];return null},a.DiscoveryTree.prototype.GetDiscoveredTreeByResourceTypeAndRevision=function(a,b){var c;if(this.discoveredTrees)for(c=0;c<this.discoveredTrees.length;c+=1)if(this.discoveredTrees[c].resourceType===a&&this.discoveredTrees[c].revision===b)return this.discoveredTrees[c];return null},a.GetOXPdDiscoveryTree=function(){return b.ajax({url:d,type:"GET",dataType:"xml"}).then(function(c){return b.Deferred(function(b){try{var d=new a.DiscoveryTree(c);b.resolve(d)}catch(e){return b.reject(e)}}).promise()},function(a,d){var e=c(a,d);return b.Deferred().reject(e)})}}(window.oxpddiscovery=window.oxpddiscovery||{},jQuery);